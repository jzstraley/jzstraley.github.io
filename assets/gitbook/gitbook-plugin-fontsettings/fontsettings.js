require(["gitbook","jquery"],function(e,t){var n,o,i=[{config:"light",text:"Light",id:0},{config:"warm",text:"Warm",id:1},{config:"dark",text:"Dark",id:2}],a=[{config:"serif",text:"Serif",id:0},{config:"sans",text:"Sans",id:1}];function s(){return i}function r(){return a}function f(){e.storage.set("fontState",n),h()}function c(e){e.preventDefault(),n.size>=4||(n.size++,f())}function l(e){e.preventDefault(),n.size<=0||(n.size--,f())}function m(e,t){t&&t instanceof Event&&t.preventDefault();var o=g(e);n.family=o,f()}function u(o,i){i&&i instanceof Event&&i.preventDefault();var a=e.state.$book,s=t(".book-body > .book-header");0!==n.theme&&(a.removeClass("color-theme-"+n.theme),0!==s.length&&s.removeClass("color-theme-"+n.theme));var r=d(o);n.theme=r,0!==n.theme&&(a.addClass("color-theme-"+n.theme),0!==s.length&&s.addClass("color-theme-"+n.theme)),f()}function g(e){var n=t.grep(a,function(t){return t.config==e})[0];return n?n.id:0}function d(e){var n=t.grep(i,function(t){return t.config==e})[0];return n?n.id:0}function h(){var o=e.state.$book;t(".font-settings .font-family-list li").removeClass("active"),t(".font-settings .font-family-list li:nth-child("+(n.family+1)+")").addClass("active"),o[0].className=o[0].className.replace(/\bfont-\S+/g,""),o.addClass("font-size-"+n.size),o.addClass("font-family-"+n.family),0!==n.theme&&(o[0].className=o[0].className.replace(/\bcolor-theme-\S+/g,""),o.addClass("color-theme-"+n.theme))}function v(){o&&e.toolbar.removeButton(o),o=e.toolbar.createButton({icon:"fa fa-font",label:"Font Settings",className:"font-settings",dropdown:[[{text:"A",className:"font-reduce",onClick:l},{text:"A",className:"font-enlarge",onClick:c}],t.map(a,function(e){return e.onClick=function(t){return m(e.config,t)},e}),t.map(i,function(e){return e.onClick=function(t){return u(e.config,t)},e})]})}e.events.bind("start",function(t,o){var i,a,s,r=o.fontsettings;v(),a=g((i=r).family),s=d(i.theme),n=e.storage.get("fontState",{size:i.size||2,family:a,theme:s}),h()}),e.fontsettings={enlargeFontSize:c,reduceFontSize:l,setTheme:u,setFamily:m,getThemes:s,setThemes:function e(t){i=t,v()},getFamilies:r,setFamilies:function e(t){a=t,v()}}});